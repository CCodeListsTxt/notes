[toc]

# 算数类型

### 整数

##### 标准整数类型

`int` 是基本整数类型，可以通过以下修饰符得到特定的整数：

* 符号修饰符：

  *   `signed`，目标类型为有符号表示（默认）。

  *   `unsigned`，目标类型为无符号表示。

* 尺寸修饰符：

  *   `short`，目标类型至少为16位宽度。

  *   `long`，目标类型至少为32位宽度。

  *   `long long`，目标类型至少为64为宽度。

使用修饰符时，可以忽略显示的 `int`，且可随意交换修饰符的位置：`unsigned long long` 和 `long unsigned int long`表示相同类型。

##### 定宽整数类型

头文件 `<cstdint>` 中定义了定宽整数类型。如 `int32_t`、`uint32_t`。

### 浮点

##### 标准浮点类型

有三种标准浮点类型，且均遵守 IEEE754 标准：

* `float`，单精度浮点类型，使用 `f` 后缀表示字面量。
* `double`，双精度浮点类型，默认字面量表示。
* `long double`，拓展精度浮点模式[^1]，使用 `l` 后缀表示字面量。

```cpp
auto main() -> int {
	std::println("{}", 0.1f + 0.2f == 0.3f);	// true
	std::println("{}", 0.1 + 0.2 == 0.3);		// false
	std::println("{}", 0.1l + 0.2l == 0.3l);	// 未定义

	return 0;
}
```

##### 定宽浮点类型

头文件 `<stdfloat>` 中定义了定宽浮点数类型以及对应字面量。如 `float32_t`。

# 指针类型

任何类型的指针都可隐式转换为空指针，但逆向转化必须显示进行。

##### 数据成员指针

指向类 `T` 的数据成员 `m` 的指针，可以使用表达式 `&T::m` 初始化。数据成员指针占用内存和普通指针相同，其实现通常是数据成员在类结构中的偏移量。

```cpp
struct T {
	int i;
	int j;
};

struct U {
	virtual ~U() = default;
	int i;
	int j;
};

auto main() -> int {
	std::printf("%p, %p\n", &T::i, &T::j);	// 0x0, 0x4
	std::printf("%p, %p\n", &U::i, &U::j);	// 0x8, 0xc	U存在虚指针，占用8字节

	return 0;
}
```

##### 成员函数指针

指向类 `T` 的成员函数 `f` 的指针，可以使用表达式 `&T::f` 初始化。成员函数指针可以作为普通函数指针调用，其第一个参数作为 `this` 指针。



---

[^1]: 由实现决定使用128位或64位
