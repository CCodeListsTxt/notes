`recvfrom(fd, buf, n, flags, from_addr, addrlen)`。

`sendto(fd, buf, n, flags, to_addr, addrlen)`。

这两个函数的返回值表示发送/接收的字节长度，因为UDP是无连接的，因此发送/接收0长度的数据是可以的。



#### udp echo 服务器
```cpp
constexpr auto port = 55555;
auto latch = std::latch{1};

auto client() {
    auto sock = socket(AF_INET, SOCK_DGRAM, 0);
    auto addr = sockaddr_in{.sin_family = AF_INET, .sin_port = htons(port)};
    assert(inet_pton(AF_INET, "127.0.0.1", &addr.sin_addr) == 1);
    latch.wait();
    std::string buf;
    while (true) {
        std::getline(std::cin, buf);
        sendto(sock, buf.data(), buf.size(), 0, (sockaddr *)&addr, sizeof(addr));
    }
}

auto server() {
    auto sock = socket(AF_INET, SOCK_DGRAM, 0);
    fcntl(sock, F_SETFD, fcntl(sock, F_GETFD) | SO_REUSEADDR);
    auto addr = sockaddr_in{.sin_family = AF_INET, .sin_port = htons(port), .sin_addr = {INADDR_ANY}};
    assert(bind(sock, (sockaddr *)&addr, sizeof(addr)) == 0);
    latch.count_down();
    char buf[4096];
    while (true) {
        buf[recvfrom(sock, buf, sizeof(buf), 0, nullptr, nullptr)] = 0;
        std::cout << buf << "\n";
    }
}

auto main() -> int {
    std::thread{server}.detach();
    client();
    return 0;
}
```