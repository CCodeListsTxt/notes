[toc]

# unique_ptr

`unique_ptr` 是独占式智能指针。其内部通常只需要维护一个指针成员和一个删除器成员。

### 构造

除了直接通过构造函数构造 `unique_ptr` 对象，还可以使用 `make_unique()` 函数簇，但此时无法指定删除器。


### 访问

`unique_ptr` 的行为和裸指针一致。也可通过 `get()` 获取当前管理的指针。


### 修改

`.release()`，返回当前管理的指针，且释放所有权。

`.reset(p)`，重置管理对象，并返回之前管理的对象。


# shared_ptr & weak_ptr

`shared_ptr` 和 `weak_ptr` 适用于共享情况的指针管理，其通过 _内存控制块_ 对资源进行管理。

### 内存控制块
_内存控制块_ 通常实现会包含以下数据成员：
* 指针。
* 共享次数。
* 弱引用次数。
* 删除器。（当 共享次数 和 弱引用次数 均归零后，通过删除器释放管理的指针）。
* 分配器。（分配器负责控制 _内存控制块_ 自身的分配和释放）。



