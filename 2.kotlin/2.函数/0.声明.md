# 高阶函数

kotlin 的函数是一级公民，可以将函数作为参数传递，也可以将其作为返回值返回。

## 函数类型

函数类型的表示方式为 `(参数类型列表) -> 返回值类型`:

* 参数类型列表中还可以指定参数的名字，同函数声明一致。

* 如果函数没有返回值，使用 `Unit` 表示。

```kotlin
fun main() {
    // 接受 Int 参数，返回函数
    val f1: (Int) -> ((Int) -> Unit) = { {} }

    // 接受函数参数，无返回
    val f2: ((Int) -> Int) -> Unit = {}
}
```

## 函数引用

函数名并非表达式，









函数的声明基本形式为`修饰 fun 函数名(参数列表)<: 返回值> 函数体 / =表达式`。

如果在函数声明处忽略返回值，函数的返回值将默认为`Unit`表示无返回值。

kotlin的入口函数为main函数，无需返回值，可选择接受命令行参数。

```kotlin
fun main(args: Array<String>) {
    print("hello")
}
```

###### 顶层函数

kotlin允许将函数声明为全局属性，但其编译后，顶层函数实际是某个类内部的静态函数。如果需要显示指定类名，使用`@file:jvmName("类名")`注解并置于文件开头，位于包名前。

同样，变量也可以置于顶层。

###### 中缀函数

使用`infix`修饰符将函数标记为中缀函数，中缀函数直接置于两个操作对象之间，而无需显示调用。中缀函数必须是成员函数或拓展函数。

```kotlin
infix fun Int.concat(i:Int):String{
    return this.toString() + i.toString()
}

fun main(args: Array<String>) {
    print(10 concat 20) // 1020
}
```

###### 函数引用

对于顶层函数或构造函数，使用`::函数名`获取函数引用。

对于成员函数或拓展函数，使用`类名::函数名`获取函数引用。

特别的，还可通过实例对象获取成员函数或拓展函数的引用，此时会将当前实例对象绑定到函数引用中。

```kotlin
class Test {
    fun call() {
        print("hello")
    }
}

fun main() {
    val obj = Test()

    (Test::call)(obj)
    (obj::call)()
}
```

###### 永不返回

将函数返回值声明为`Nothing`，表示其一直抛出异常或者无限循环，永远不会正常返回结果。
